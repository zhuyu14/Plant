<!DOCTYPE HTML>
<html>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
  <title>Graph2d | Basic Example</title>

  <style type="text/css">
    body, html {
      font-family: sans-serif;
    }
  </style>

  <script src="../../dist/vis.js"></script>
  <link href="../../dist/vis.css" rel="stylesheet" type="text/css" />
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-61231638-1', 'auto');ga('send', 'pageview');</script></head>
<body>
<h2>Plant</h2>

<div id="visualization"></div>

<script type="text/javascript">

Parse.initialize("8yoG7mH30CFSbMCy0VBD2toiX7DEnt8ZG23tGQHp", "YHeO3m6lZHKZHoM8k0VGWeBY5qf9Z3h181QHnIM2");

      var DataList = Parse.Object.extend("Plant");  
      var query = new Parse.Query(DataList);
      var container = document.getElementById('visualization');
      var dataset_t ;
	  var dataset_m ;
	  var dataset_h ;
	  var graph2d_t ;
	  var graph2d_m ;
	  var graph2d_h ;
	  var item_t;
	  var item_m;
	  var item_h;
   query.find({  
       success: function(results) {  
          
          //  Do something with the returned Parse.Object values 

  var item_t = [
    {x: results[results.length-1].createdAt, y: results[results.length-1].get('temperature')},
    {x: results[results.length-2].createdAt, y: results[results.length-2].get('temperature')},
	{x: results[results.length-3].createdAt, y: results[results.length-3].get('temperature')},
	{x: results[results.length-4].createdAt, y: results[results.length-4].get('temperature')},
	{x: results[results.length-5].createdAt, y: results[results.length-5].get('temperature')},
	{x: results[results.length-6].createdAt, y: results[results.length-6].get('temperature')},
	{x: results[results.length-7].createdAt, y: results[results.length-7].get('temperature')},
 
  ];
  var item_m = [
    {x: results[results.length-1].createdAt, y: results[results.length-1].get('moisture')},
    {x: results[results.length-2].createdAt, y: results[results.length-2].get('moisture')},
	{x: results[results.length-3].createdAt, y: results[results.length-3].get('moisture')},
	{x: results[results.length-4].createdAt, y: results[results.length-4].get('moisture')},
	{x: results[results.length-5].createdAt, y: results[results.length-5].get('moisture')},
	{x: results[results.length-6].createdAt, y: results[results.length-6].get('moisture')},
	{x: results[results.length-7].createdAt, y: results[results.length-7].get('moisture')},
 
  ];
  var item_h = [
    {x: results[results.length-1].createdAt, y: results[results.length-1].get('humidity')},
    {x: results[results.length-2].createdAt, y: results[results.length-2].get('humidity')},
	{x: results[results.length-3].createdAt, y: results[results.length-3].get('humidity')},
	{x: results[results.length-4].createdAt, y: results[results.length-4].get('humidity')},
	{x: results[results.length-5].createdAt, y: results[results.length-5].get('humidity')},
	{x: results[results.length-6].createdAt, y: results[results.length-6].get('humidity')},
	{x: results[results.length-7].createdAt, y: results[results.length-7].get('humidity')},
	
  ];
    dataset_t = new vis.DataSet(item_t);
	dataset_m = new vis.DataSet(item_m);
	dataset_h = new vis.DataSet(item_h);
	
    var options = {
	
    start:results[results.length-7].createdAt,
    end: results[results.length-1].createdAt
  };
  
 
  graph2d_t = new vis.Graph2d(container, dataset_t, options);
  graph2d_m = new vis.Graph2d(container, dataset_m, options);
  graph2d_h = new vis.Graph2d(container, dataset_h, options);
       },  
       error: function(error) {  
           alert("Error: " + error.code + " " + error.message);  
       }  
      });  



</script>
</body>
</html>